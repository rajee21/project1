AWSTemplateFormatVersion: 2010-09-09
Description: PEGA_Environment
Parameters:
  ALBSecurityGroup:
    Description:  SecurityGroup for ALB.
    Type: 'AWS::EC2::SecurityGroup::Id'
    Default: Must choose a valid SecurityGroup
  PublicSubnet:
    Description: The subnet IDs to use for the load balancer. The subnets must match the Availability Zone values below.
    Type: 'AWS::EC2::Subnet::Id'
    Default: Must choose a valid subnet
  KeyName:
    Description: Name of an existing EC2 KeyPair to enable SSH access to the instance
    Type: AWS::EC2::KeyPair::KeyName
Resources:
  WebInstance1:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: ami-04b1821d4b22deec5
      InstanceType: t2.micro
      SubnetId: !Ref PublicSubnet
      DisableApiTermination: true
      Monitoring: false
      UserData:
        "Fn::Base64": 
          "Fn::Sub": |
            #!/bin/bash -ex
            cd /tmp
            wget https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/debian_amd64/amazon-ssm-agent.deb
      KeyName: !Ref KeyName
      
      